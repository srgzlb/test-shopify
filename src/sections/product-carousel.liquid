{%- assign padding_top 				= section.settings.padding_top -%}
{%- assign padding_bottom 			= section.settings.padding_bottom -%}
{%- assign padding_top_mobile 		= section.settings.padding_top_mobile -%}
{%- assign padding_bottom_mobile 	= section.settings.padding_bottom_mobile -%}
{%- assign text_color 				= section.settings.text_color -%}
{%- assign title 					= section.settings.title -%}
{%- assign title_size 				= section.settings.title_size -%}
{%- assign products_limit 			= section.settings.products_limit -%}
{%- assign collection 			    = section.settings.collection -%}
{%- assign products                 = collection.products -%}

{%- capture variables -%}
    --padding-top: {{ padding_top }}px;
    --padding-bottom: {{ padding_bottom }}px;
	--padding-top-mobile: {{ padding_top_mobile }}px;
    --padding-bottom-mobile: {{ padding_bottom_mobile }}px;
	--text-color: {{ text_color }};
{%- endcapture -%}

{%- if collection -%}
    <div class="product-carousel{% if padding_top != 0 or padding_top_mobile != 0 %} product-carousel--padding-top{% endif %}{% if padding_bottom != 0 or padding_bottom_mobile != 0 %} product-carousel--padding-bottom{% endif %}"
        data-section-id="{{ section.id }}"
        data-section-type="product-carousel"
		style="{{- variables | escape -}}"
	>
	    <div class="product-carousel__container container">
            {%- if title != blank -%}
                <div class="product-carousel__header product-carousel__header--no-tabs">
                    <h2 class="product-carousel__title {{ title_size }}">
                        {{- title | replace: "p>", "span>" -}}
                    </h2>
                </div>
            {%- endif -%}

            <div class="product-carousel__slider">
                <div class="product-carousel__slider-container swiper-container slider__container js-product-carousel-container">
                    <div class="product-carousel__slider-wrapper swiper-wrapper slider__wrapper">
                        {%- for product in products limit: products_limit -%}
                            <div class="product-carousel__slide swiper-slide slider__slide">
                                {%- render 'product-card', product: product -%}
                            </div>
                        {%- endfor -%}
                    </div>
                    <div class="product-carousel__prev swiper-button-prev js-product-carousel-prev">
                        {%- render 'icon-arrow' -%}
                    </div>
                    <div class="product-carousel__next swiper-button-next js-product-carousel-next">
                        {%- render 'icon-arrow' -%}
                    </div>
                </div>
            </div>
        </div>
    </div>
{%- endif -%}

{% schema -%}
    {
        "name": "t:sections.product-carousel.name",
		"tag": "section",
		"class": "product-carousel-section",
        "settings": [
            {
                "type": "paragraph",
                "content": "t:sections.product-carousel.settings.paragraph.content"
            },
            {
                "type": "collection",
                "id": "collection",
                "label": "t:sections.product-carousel.settings.collection.label"
            },
            {
                "type": "richtext",
                "id": "title",
                "label": "t:sections.product-carousel.settings.title.label",
                "default": "<p>We have a scent for <em>everybody</em></p>"
            },
			{
				"type": "select",
				"id": "title_size",
				"options": [
					{
						"value": "h3",
						"label": "t:sections.all.heading_size.options__1.label"
					},
					{
						"value": "h2",
						"label": "t:sections.all.heading_size.options__2.label"
					},
					{
						"value": "h1",
						"label": "t:sections.all.heading_size.options__3.label"
					}
				],
				"default": "h2",
				"label": "t:sections.all.heading_size.label"
			},
			{
				"type": "color",
				"id": "text_color",
				"label": "t:sections.product-carousel.settings.text_color.label",
				"default": "#000000"
			},
			{
				"type": "range",
				"id": "products_limit",
				"min": 4,
				"max": 10,
				"step": 1,
				"unit": "pcs",
				"label": "t:sections.product-carousel.settings.products_limit.label",
				"default": 4
			},
            {
				"type": "header",
				"content": "t:sections.product-carousel.settings.header.content"
			},
			{
				"type": "range",
				"id": "padding_top",
				"min": 0,
				"max": 100,
				"step": 1,
				"unit": "px",
				"label": "t:sections.all.padding.padding_top",
				"default": 40
			},
			{
				"type": "range",
				"id": "padding_bottom",
				"min": 0,
				"max": 100,
				"step": 1,
				"unit": "px",
				"label": "t:sections.all.padding.padding_bottom",
				"default": 40
			},
			{
				"type": "header",
				"content": "t:sections.product-carousel.settings.header.content_mobile"
			},
			{
				"type": "range",
				"id": "padding_top_mobile",
				"min": 0,
				"max": 70,
				"step": 1,
				"unit": "px",
				"label": "t:sections.all.padding.padding_top",
				"default": 20
			},
			{
				"type": "range",
				"id": "padding_bottom_mobile",
				"min": 0,
				"max": 70,
				"step": 1,
				"unit": "px",
				"label": "t:sections.all.padding.padding_bottom",
				"default": 20
			}
        ],
        "presets": [
            {
                "name": "t:sections.product-carousel.presets.name"
            }
        ]
    }
{% endschema %}
